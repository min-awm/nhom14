(function(t){function e(e){for(var a,r,o=e[0],c=e[1],l=e[2],u=0,h=[];u<o.length;u++)r=o[u],Object.prototype.hasOwnProperty.call(n,r)&&n[r]&&h.push(n[r][0]),n[r]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(t[a]=c[a]);d&&d(e);while(h.length)h.shift()();return i.push.apply(i,l||[]),s()}function s(){for(var t,e=0;e<i.length;e++){for(var s=i[e],a=!0,r=1;r<s.length;r++){var c=s[r];0!==n[c]&&(a=!1)}a&&(i.splice(e--,1),t=o(o.s=s[0]))}return t}var a={},n={app:0},i=[];function r(t){return o.p+"js/"+({about:"about"}[t]||t)+"."+{about:"9e194c37"}[t]+".js"}function o(e){if(a[e])return a[e].exports;var s=a[e]={i:e,l:!1,exports:{}};return t[e].call(s.exports,s,s.exports,o),s.l=!0,s.exports}o.e=function(t){var e=[],s=n[t];if(0!==s)if(s)e.push(s[2]);else{var a=new Promise((function(e,a){s=n[t]=[e,a]}));e.push(s[2]=a);var i,c=document.createElement("script");c.charset="utf-8",c.timeout=120,o.nc&&c.setAttribute("nonce",o.nc),c.src=r(t);var l=new Error;i=function(e){c.onerror=c.onload=null,clearTimeout(u);var s=n[t];if(0!==s){if(s){var a=e&&("load"===e.type?"missing":e.type),i=e&&e.target&&e.target.src;l.message="Loading chunk "+t+" failed.\n("+a+": "+i+")",l.name="ChunkLoadError",l.type=a,l.request=i,s[1](l)}n[t]=void 0}};var u=setTimeout((function(){i({type:"timeout",target:c})}),12e4);c.onerror=c.onload=i,document.head.appendChild(c)}return Promise.all(e)},o.m=t,o.c=a,o.d=function(t,e,s){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(o.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)o.d(s,a,function(e){return t[e]}.bind(null,a));return s},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/",o.oe=function(t){throw console.error(t),t};var c=window["webpackJsonp"]=window["webpackJsonp"]||[],l=c.push.bind(c);c.push=e,c=c.slice();for(var u=0;u<c.length;u++)e(c[u]);var d=l;i.push([0,"chunk-vendors"]),s()})({0:function(t,e,s){t.exports=s("cd49")},1:function(t,e){},10:function(t,e){},2:function(t,e){},"2a16":function(t,e,s){},3:function(t,e){},3187:function(t,e,s){"use strict";var a=s("7a36"),n=s.n(a);n.a},4:function(t,e){},5:function(t,e){},"5c0b":function(t,e,s){"use strict";var a=s("9c0c"),n=s.n(a);n.a},6:function(t,e){},7:function(t,e){},"7a36":function(t,e,s){},8:function(t,e){},9:function(t,e){},"94ab":function(t,e,s){"use strict";var a=s("c4d8"),n=s.n(a);n.a},9595:function(t,e,s){},"9a1d":function(t,e,s){"use strict";var a=s("9595"),n=s.n(a);n.a},"9c0c":function(t,e,s){},a3dc:function(t,e,s){},bfb7:function(t,e,s){"use strict";var a=s("2a16"),n=s.n(a);n.a},c4d8:function(t,e,s){},cd49:function(t,e,s){"use strict";s.r(e);s("e260"),s("e6cf"),s("cca6"),s("a79d");var a=s("9aa5"),n=s.n(a),i=s("2b0e"),r=s("4eb5"),o=s.n(r),c=s("b2b9"),l=s.n(c),u=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"app"}},[s("Header"),s("transition",{attrs:{name:"slide-fade"}},[s("keep-alive",[s("router-view",{class:{noanim:!t.$store.state.settings.anim}})],1)],1)],1)},d=[],h=(s("b0c0"),s("b64b"),s("5530")),m=s("53ca"),p=(s("96cf"),s("1da1")),f=s("b85c"),g=s("8634"),v=s("98f9"),b=s.n(v),y=s("e336"),C={name:"App",methods:{init:function(){var t=this;this.setUpP2PT(),this.$store.subscribe((function(e){"activateInternetShare"===e.type&&(t.$store.commit("destroyP2PT"),t.startP2PT(t.$store.state.roomID),t.$buefy.toast.open({duration:4e3,message:"Joined Room <b>".concat(t.$store.state.roomID,"</b>"),position:"is-top",type:"is-info"}))})),this.$root.$on("ping",(function(e){var s,a={type:"ping"},n=Object(f["a"])(e);try{for(n.s();!(s=n.n()).done;){var i=s.value;t.$store.state.p2pt.send(i.conn,a)}}catch(r){n.e(r)}finally{n.f()}}))},setUpP2PT:function(){var t=this;return Object(p["a"])(regeneratorRuntime.mark((function e(){var s,a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(s=t.$route.query.room,!s||!t.$validateRoomCode(s)){e.next=6;break}t.$store.commit("activateInternetShare",s),t.startP2PT(s),e.next=27;break;case 6:return e.prev=6,e.prev=7,e.next=10,y["v4"]();case 10:a=e.sent,e.next=18;break;case 13:return e.prev=13,e.t0=e["catch"](7),e.next=17,y["v6"]();case 17:a=e.sent;case 18:n=g(a).substr(0,t.$INTERNET_ROOM_CODE_LENGTH),t.$store.commit("setRoom",n),t.startP2PT(n),e.next=27;break;case 23:e.prev=23,e.t1=e["catch"](6),console.log(e.t1),t.$buefy.snackbar.open({message:"Could not find your IP address",position:"is-top",type:"is-danger",queue:!0,indefinite:!0,actionText:"Retry",onAction:t.setUpP2PT});case 27:case"end":return e.stop()}}),e,null,[[6,23],[7,13]])})))()},startP2PT:function(t){var e=this,s=new v(this.$ANNOUNCE_URLS);s.setIdentifier("webdrop"+t),s.on("peerconnect",(function(t){s.send(t,{type:"init",name:e.$store.state.settings.name,color:e.$store.state.settings.color,sharesCount:Object.keys(e.$store.state.shares).length,msgsCount:e.$store.state.msgs.length})})),s.on("msg",(function(t,a){if("object"===Object(m["a"])(a)){var n=a.type;if("getShares"===n)e.sendSharesState(s,t);else if("getMsgs"===n)e.sendMsgsState(s,t);else if("init"===n)e.$store.commit("addUser",{id:t.id,name:a.name,color:a.color,conn:t}),a.sharesCount>Object.keys(e.$store.state.shares).length&&s.send(t,{type:"getShares"}),a.msgsCount>e.$store.state.msgs.length&&s.send(t,{type:"getMsgs"});else if("ping"===n)e.$buefy.snackbar.open({duration:3e3,message:"<b>".concat(e.$store.state.users[t.id].name,"</b> pinged!"),type:"is-warning",queue:!1});else if("newShare"===n)delete a.type,a.peer=t,e.$store.commit("newShare",a);else if("startSending"===n){var i=a.shareID,r=e.$store.state.shares[i];r&&r.file&&!r.paused&&e.$pf.send(t,i,r.file).then((function(s){e.$store.commit("setTransfer",{shareID:i,transfer:s});var a=0;s.on("progress",(function(s,n){s=parseInt(s);var r=n-a;a=n,e.$store.dispatch("uploadProgress",{shareID:i,userID:t.id,progress:s,bytes:r})})),s.on("done",(function(){return e.$store.commit("removeTransfer",{shareID:i,userID:s.peer._id})})),s.start()}))}else if("msg"===n){if(a.id&&e.$store.state.msgs[a.id])return;a.name||(a.name=e.$store.state.users[t.id].name,a.color=e.$store.state.users[t.id].color),delete a.type,e.$store.commit("addMessage",a),e.$store.state.settings.autoCopy&&e.$copyText(a.msg).then((function(t){e.$buefy.toast.open({duration:2e3,message:"Message Copied !",position:"is-top",type:"is-primary"})}))}}})),s.on("peerclose",(function(t){e.$store.commit("removeUser",t.id)}));var a=0,n=!1,i=!1;s.on("trackerwarning",(function(r,o){a++,console.log(r),a>=o.total&&!n&&!i&&(i=e.$buefy.snackbar.open({message:"Ch√∫ng t√¥i kh√¥ng th·ªÉ k·∫øt n·ªëi v·ªõi b·∫•t k·ª≥ tr√¨nh theo d√µi WebTorrent n√†o. ISP c·ªßa b·∫°n c√≥ th·ªÉ ƒëang ch·∫∑n h·ªç ü§î",position:"is-top",type:"is-danger",queue:!1,indefinite:!0,actionText:"Th·ª≠ l·∫°i",onAction:function(){n||(e.$store.commit("destroyP2PT"),s.destroy(),e.startP2PT(t)),i.close()}}))})),s.on("trackerconnect",(function(){n=!0,i&&i.close()})),this.$store.commit("setP2PT",s),s.start()},sendSharesState:function(t,e){for(var s in this.$store.state.shares){var a=this.$store.state.shares[s];a.mine&&(a=Object(h["a"])(Object(h["a"])({},a),{type:"newShare",i:s}),t.send(e,a))}},sendMsgsState:function(t,e){for(var s in this.$store.state.msgs){var a=this.$store.state.msgs[s];t.send(e,Object(h["a"])(Object(h["a"])({},a),{type:"msg",id:s}))}}},mounted:function(){this.init()}},w=C,k=(s("5c0b"),s("2877")),S=Object(k["a"])(w,u,d,!1,null,null,null),$=S.exports,_=(s("d3b7"),s("8c4f")),x=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[t.userSelectedCount>0?s("b-navbar",{staticClass:"navbar is-info is-fixed-top has-text-white has-shadow",attrs:{"mobile-burger":!1}},[s("template",{slot:"brand"},[s("b-navbar-item",[s("b-button",{attrs:{type:"is-danger",size:"is-medium"},on:{click:t.cancelAllUserSelection}},[t._v("X")])],1),s("b-navbar-item",{attrs:{tag:"div"}},[t._v(" "+t._s(t.userSelectedCount)+" ng∆∞·ªùi d√πng ƒë√£ ch·ªçn ")]),s("div",{staticClass:"actions"},[s("b-navbar-item",{attrs:{tag:"div"},on:{click:t.ping}},[s("b-button",{attrs:{type:"is-warning",size:"is-medium"}},[t._v("Ping!")])],1)],1)],1)],2):t._e(),s("div",{attrs:{id:"earth-wrapper"}},[s("svg",{ref:"earth",attrs:{xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",id:"earth",preserveAspectRatio:"xMidYMid meet"}},[s("defs",[s("filter",{attrs:{id:"shadow",x:"-20%",y:"-20%",width:"200%",height:"200%"}},[s("feOffset",{attrs:{result:"offOut",in:"SourceAlpha",dx:"0",dy:"0"}}),s("feGaussianBlur",{attrs:{result:"blurOut",in:"offOut",stdDeviation:"2"}}),s("feBlend",{attrs:{in:"SourceGraphic",in2:"blurOut",mode:"normal"}})],1),t.$store.state.settings.anim?s("animate",{attrs:{id:"searchCircleAnim","xlink:href":"#search-circle",attributeName:"r",from:t.radarFromVal,to:t.radarToVal,dur:"6s",begin:"2s;searchCircleAnim.end+2s",restart:"whenNotActive"}}):t._e(),s("radialGradient",{attrs:{id:"searchCircleGradient",cx:"50%",cy:"50%",r:"50%",fx:"50%",fy:"50%"}},[s("stop",{staticStyle:{"stop-color":"rgb(255,255,255)","stop-opacity":"0"},attrs:{offset:"70%"}}),s("stop",{staticStyle:{"stop-color":"#209cee","stop-opacity":"1"},attrs:{offset:"100%"}})],1)],1)])])],1)},I=[],T=(s("99af"),s("4160"),s("4fad"),s("159b"),s("3835")),O={name:"Index",earth:HTMLElement,svg:null,circleStartingX:0,circleStartingY:0,userCircleRadius:0,data:function(){return{circleSlots:[],radarFromVal:0,radarToVal:0}},computed:{userSelectedCount:function(){return this.$store.state.selectedUsers.length}},methods:{init:function(){var t=this;for(var e in this.setUpEarth(),this.$store.subscribe((function(e){"addUser"===e.type?t.addUser(e.payload):"removeUser"===e.type&&t.removeUser(e.payload)})),this.$store.state.users){var s=this.$store.state.users[e];s=Object(h["a"])(Object(h["a"])({},s),{id:e}),this.addUser(s)}},ping:function(){var t,e=[],s=Object(f["a"])(this.$store.state.selectedUsers);try{for(s.s();!(t=s.n()).done;){var a=t.value;e.push(this.$store.state.users[a])}}catch(n){s.e(n)}finally{s.f()}this.$root.$emit("ping",e)},makeSVGNode:function(t,e){t=document.createElementNS("http://www.w3.org/2000/svg",t);for(var s=0,a=Object.entries(e);s<a.length;s++){var n=Object(T["a"])(a[s],2),i=n[0],r=n[1];t.setAttributeNS(null,i,r)}return t},setUpEarth:function(){this.earth=this.$refs.earth,this.svg=this.earth;var t=[window.innerWidth,window.innerHeight];this.svg.setAttribute("viewBox","0 0 ".concat(t[0]," ").concat(t[1])),this.circleStartingX=t[0]/2,this.circleStartingY=t[1]-.1*t[1];var e=this.makeSVGNode("circle",{r:"0",cx:this.circleStartingX,cy:this.circleStartingY,stroke:"#209cee",fill:"url(#searchCircleGradient)",id:"search-circle"});this.svg.appendChild(e);var s=Math.max(t[0]/2,t[1]);this.userCircleRadius=.03*t[1],this.radarFromVal=this.userCircleRadius,this.radarToVal=s+.5*s;var a=this.userCircleRadius,n=0;while(a<s){if(this.svg.appendChild(this.makeSVGNode("circle",{r:a,cx:this.circleStartingX,cy:this.circleStartingY,stroke:"#CCC",fill:"transparent"})),n>1){var i=Math.PI/4;n>2&&(i+=i/3),n>3&&(i+=i/(2^n)),this.circleSlots.push([this.circleStartingX,this.circleStartingY-a,!1]),this.circleSlots.push([this.circleStartingX+a*Math.cos(i),this.circleStartingY-a*Math.sin(i),!1]),this.circleSlots.push([this.circleStartingX-a*Math.cos(i),this.circleStartingY-a*Math.sin(i),!1])}a+=.1*s,n++}this.addUserCircle("me",this.$store.state.settings.name,this.$store.state.settings.color,this.circleStartingX,this.circleStartingY)},addUser:function(t){var e,s;for(s in this.circleSlots)if(e=this.circleSlots[s],!1===e[2])break;e[2]=!0,this.addUserCircle(t.id,t.name,t.color,e[0],e[1],s)},addUserCircle:function(t,e,s,a,n,i){var r=this.earth.querySelector('.user[id="'.concat(t,'"]'));if(!r){var o=this.makeSVGNode("g",{class:"user",id:t,slotindex:i});o.addEventListener("click",this.onUserClick);var c=this.makeSVGNode("circle",{r:this.userCircleRadius,cx:a,cy:n,stroke:"#CCC",fill:s,filter:"url(#shadow)"});o.appendChild(c);var l=this.makeSVGNode("text",{class:"user-text",id:t,"dominant-baseline":"middle","text-anchor":"middle",x:a,y:n-this.userCircleRadius-10});l.textContent=e,o.appendChild(l),this.svg.appendChild(o)}},onUserClick:function(t){var e=t.target.parentElement,s=e.id;"me"!==s&&(e.classList.contains("selected")?(this.$store.commit("deselectUser",s),e.classList.remove("selected")):(this.$store.commit("selectUser",s),e.classList.add("selected")))},removeUser:function(t){var e=this.earth.querySelector('.user[id="'.concat(t,'"]'));if(e){var s=this.circleSlots[e.getAttribute("slotindex")];s[2]=!1,e.remove()}},cancelAllUserSelection:function(){this.$store.commit("clearSelectedUsers"),this.earth.querySelectorAll(".selected").forEach((function(t){t.classList.remove("selected")}))}},mounted:function(){this.init()}},R=O,P=(s("bfb7"),Object(k["a"])(R,x,I,!1,null,null,null)),E=P.exports,D=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"container"},[s("div",{staticClass:"content"},[s("h2",[t._v("C√†i ƒë·∫∑t")]),s("b-field",{attrs:{label:"T√™n thi·∫øt b·ªã"}},[s("b-input",{attrs:{maxlength:"30"},model:{value:t.settings.name,callback:function(e){t.$set(t.settings,"name",e)},expression:"settings.name"}})],1),s("div",{staticClass:"field card card-content"},[s("label",{staticClass:"label"},[t._v("M√†u thi·∫øt b·ªã")]),s("div",{staticClass:"control"},[t._l(t.colors,(function(e,a){return s("span",{key:a,staticClass:"device-color",class:{selected:e==t.settings.color},style:{"background-color":e},on:{click:function(s){t.settings.color=e}}})})),s("p",[t._v("C·∫ßn t·∫£i l·∫°i ƒë·ªÉ thay ƒë·ªïi m√†u c√≥ hi·ªáu l·ª±c")])],2)]),s("div",{staticClass:"field card card-content"},[s("label",{staticClass:"label"},[t._v("T·ª± ƒë·ªông b·∫Øt ƒë·∫ßu")]),s("div",{staticClass:"control"},[s("b-checkbox",{model:{value:t.settings.autoStart,callback:function(e){t.$set(t.settings,"autoStart",e)},expression:"settings.autoStart"}},[t._v("B·∫Øt ƒë·∫ßu t·∫£i xu·ªëng t·ªáp khi nh·∫≠n")])],1),s("div",{staticClass:"control"},[s("b-checkbox",{model:{value:t.settings.autoBrowserDownload,callback:function(e){t.$set(t.settings,"autoBrowserDownload",e)},expression:"settings.autoBrowserDownload"}},[t._v("B·∫Øt ƒë·∫ßu t·∫£i xu·ªëng t·ªáp qua tr√¨nh qu·∫£n l√Ω t·∫£i xu·ªëng c·ªßa tr√¨nh duy·ªát khi nh·∫≠n (Kh√¥ng ho·∫°t ƒë·ªông trong m·ªôt s·ªë tr√¨nh duy·ªát)")])],1)]),s("div",{staticClass:"field card card-content"},[s("label",{staticClass:"label"},[t._v(" T·ª± ƒë·ªông sao ch√©p")]),s("div",{staticClass:"control"},[s("b-checkbox",{model:{value:t.settings.autoCopy,callback:function(e){t.$set(t.settings,"autoCopy",e)},expression:"settings.autoCopy"}},[t._v("Sao ch√©p tin nh·∫Øn v√†o khay nh·ªõ t·∫°m khi nh·∫≠n ")])],1)]),s("div",{staticClass:"field card card-content"},[s("label",{staticClass:"label"},[t._v("Tab m·∫∑c ƒë·ªãnh")]),s("div",{staticClass:"control"},[s("b-checkbox",{attrs:{"true-value":"1","false-value":"0"},model:{value:t.settings.defaultTab,callback:function(e){t.$set(t.settings,"defaultTab",e)},expression:"settings.defaultTab"}},[t._v("Ch·ªçn "),s("b",[t._v("Tin nh·∫Øn")]),t._v(" l√† tab m·∫∑c ƒë·ªãnh")])],1)]),s("div",{staticClass:"field card card-content"},[s("label",{staticClass:"label"},[t._v("Ho·∫°t ·∫£nh")]),s("div",{staticClass:"control"},[s("b-checkbox",{model:{value:t.settings.anim,callback:function(e){t.$set(t.settings,"anim",e)},expression:"settings.anim"}},[t._v("Ho·∫°t ·∫£nh & chuy·ªÉn ti·∫øp")])],1)]),s("div",{staticClass:"field card-content is-grouped",staticStyle:{"justify-content":"center"}},[s("div",{staticClass:"control"},[s("button",{staticClass:"button is-medium is-success",on:{click:t.save}},[t._v("L∆∞u")])]),s("div",{staticClass:"control"},[s("button",{staticClass:"button is-medium is-light",on:{click:t.init}},[t._v("Reset")])])])],1)])},M=[],N=(s("c975"),{name:"Settings",data:function(){return{colors:[],settings:{}}},methods:{init:function(){this.settings=Object.assign({},this.settings,this.$store.state.settings);var t=[this.settings.color],e=0;while(e<15){var s="hsla(".concat(~~(360*Math.random()),",60%,60%,1)");-1===t.indexOf(s)&&(t.push(s),e++)}this.colors=t},save:function(){this.$buefy.toast.open({duration:2e3,message:"Settings Saved",position:"is-top",type:"is-primary"}),this.$store.commit("updateSettings",this.settings),this.$router.push("/")}},mounted:function(){this.init()}}),j=N,U=(s("9a1d"),Object(k["a"])(j,D,M,!1,null,null,null)),L=U.exports,A=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"container"},[s("center",[s("b-tabs",{attrs:{type:"is-boxed",expanded:""},model:{value:t.activeTab,callback:function(e){t.activeTab=e},expression:"activeTab"}},[s("b-tab-item",{staticClass:"content",attrs:{label:"M·ªùi m·ªçi ng∆∞·ªùi"}},[s("p",[t._v("Chia s·∫ª m√£ ph√≤ng "),s("b",{staticClass:"is-size-4"},[t._v(t._s(t.roomID))]),t._v(" ho·∫∑c li√™n k·∫øt n√†y v·ªõi nh·ªØng ng∆∞·ªùi b·∫°n mu·ªën chia s·∫ª n·ªôi dung:")]),s("div",{staticClass:"control is-expanded"},[s("input",{staticClass:"input is-info is-medium is-flat",attrs:{onclick:"this.select()",readonly:""},domProps:{value:t.internetInviteLink}})]),s("br"),s("div",{staticClass:"control"},[s("span",{directives:[{name:"clipboard",rawName:"v-clipboard",value:t.internetInviteLink,expression:"internetInviteLink"}],staticClass:"button is-info is-primary is-medium",staticStyle:{width:"100%"},on:{click:t.copyInviteLink}},[t._v("Copy")])]),s("br"),s("img",{attrs:{"aria-label":"Qr Code Image",src:t.qrURL}}),s("p",[t._v("Ho·∫∑c qu√©t m√£ Qr ·ªü tr√™n")])]),s("b-tab-item",{staticClass:"content",attrs:{label:"V√†o ph√≤ng"}},[s("p",[t._v("M√£ ph√≤ng g·ªìm "),s("b",[t._v(t._s(t.$INTERNET_ROOM_CODE_LENGTH))]),t._v(" ch·ªØ c√°i")]),s("div",{staticClass:"control is-expanded"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.internetRoomInput,expression:"internetRoomInput"}],staticClass:"input is-info is-medium is-flat",attrs:{placeholder:"Paste the room code here"},domProps:{value:t.internetRoomInput},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.onJoinClick(e)},input:function(e){e.target.composing||(t.internetRoomInput=e.target.value)}}})]),s("br"),s("div",{staticClass:"button is-info is-medium",staticStyle:{width:"100%"},on:{click:t.onJoinClick}},[t._v("Tham gia")])])],1)],1)],1)},B=[],F=s("49ee"),q={name:"Room",data:function(){return{activeTab:0,internetRoomInput:"",qrURL:""}},computed:{internetShare:function(){return this.$store.state.internetShare},roomID:function(){return this.$store.state.roomID},internetInviteLink:function(){return this.$INTERNET_ROOM_SHARE_LINK+this.roomID}},watch:{roomID:function(){this.makeQr()}},methods:{init:function(){this.makeQr()},copyInviteLink:function(){this.$buefy.toast.open({duration:2e3,message:"ƒê√£ sao ch√©p li√™n k·∫øt m·ªùi!",position:"is-top",type:"is-primary"})},onJoinClick:function(){var t=this;this.$validateRoomCode(this.internetRoomInput)?Object.keys(this.$store.state.users).length>0?this.$buefy.snackbar.open({message:"Joining another room will remove all your current connected devices. Proceed ?",type:"is-success",position:"is-top",indefinite:!1,queue:!1,actionText:"Yes",onAction:function(){t.joinInternetRoom()}}):this.joinInternetRoom():this.$store.dispatch("invalidRoomCode")},joinInternetRoom:function(){this.$store.commit("activateInternetShare",this.internetRoomInput),this.activeTab=0,this.$router.push("/"),this.makeQr()},makeQr:function(){var t=document.createElement("canvas");F["a"].render({text:this.internetInviteLink,radius:.5,ecLevel:"Q",fill:"#000",background:null,size:180},t),this.qrURL=t.toDataURL()}},mounted:function(){this.init()}},z=q,G=(s("d0a2"),Object(k["a"])(z,A,B,!1,null,null,null)),K=G.exports,H=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"container"},[s("b-tabs",{attrs:{type:"is-boxed",expanded:""},model:{value:t.activeTab,callback:function(e){t.activeTab=e},expression:"activeTab"}},[s("b-tab-item",{class:{noanim:!t.$store.state.settings.anim},attrs:{label:"Files"}},[s("template",{slot:"header"},[s("file-multiple-icon",{staticClass:"icon is-small"}),s("span",[s("span",{staticClass:"icon-text"},[t._v("Files")]),t._v(" "),s("b-tag",{staticClass:"countTag",class:{"is-danger":t.glowFilesBtn},attrs:{rounded:""}},[t._v(t._s(t.shares.length))])],1)],1),s("div",{staticClass:"field content is-grouped is-grouped-multiline"},[s("div",{staticClass:"control"},[s("b-upload",{attrs:{multiple:!0},on:{input:t.onFileChange},model:{value:t.files,callback:function(e){t.files=e},expression:"files"}},[s("a",{staticClass:"button is-primary",attrs:{"aria-label":"Add File/Folder",title:"Add File/Folder"}},[s("file-upload-icon",{staticClass:"icon is-small"}),s("span",{staticClass:"icon-text"},[t._v("Th√™m File")])],1)])],1),s("div",{directives:[{name:"show",rawName:"v-show",value:t.tableCheckedRows.length>0,expression:"tableCheckedRows.length > 0"}],staticClass:"control",attrs:{id:"shareButtons"}},[1===t.tableCheckedRows.length?s("div",{staticClass:"control"},[s("b-field",{attrs:{grouped:""}},[t.tableCheckedRows[0].paused?s("div",{staticClass:"control"},[s("a",{staticClass:"button is-warning",attrs:{"aria-label":"Resume",title:"B·∫£n t√≥m t·∫Øt"},on:{click:t.resumeShare}},[s("play-icon",{staticClass:"icon is-small"})],1)]):s("div",{staticClass:"control"},[s("a",{staticClass:"button",attrs:{"aria-label":"Pause",title:"D·ª´ng"},on:{click:t.pauseShare}},[s("pause-icon",{staticClass:"icon is-small"})],1)]),s("div",{staticClass:"control"},[s("a",{staticClass:"button is-danger",attrs:{"aria-label":"Delete",title:"X√≥a"},on:{click:t.removeShare}},[s("delete-icon",{staticClass:"icon is-small"})],1)])])],1):s("div",{staticClass:"control"},[s("b-field",{attrs:{grouped:""}},[s("div",{staticClass:"control"},[s("a",{staticClass:"button is-warning",attrs:{"aria-label":"Resume",title:"B·∫£n t√≥m t·∫Øt"},on:{click:t.resumeShare}},[s("play-icon",{staticClass:"icon is-small"})],1)]),s("div",{staticClass:"control"},[s("a",{staticClass:"button",attrs:{"aria-label":"Pause",title:"D·ª´ng"},on:{click:t.pauseShare}},[s("pause-icon",{staticClass:"icon is-small"})],1)]),s("div",{staticClass:"control"},[s("a",{staticClass:"button is-danger",attrs:{"aria-label":"Delete",title:"X√≥a"},on:{click:t.removeShare}},[s("delete-icon",{staticClass:"icon is-small"})],1)])])],1)]),s("b-field",{staticClass:"control action",attrs:{grouped:""}},[s("span",{staticClass:"tag is-dark"},[s("speed-icon",{staticClass:"icon is-small"}),s("span",[t._v(t._s(t.speed)+"/s")])],1)])],1),s("b-table",{staticClass:"content",attrs:{id:"shares",data:t.shares,"checked-rows":t.tableCheckedRows,checkable:"","checkbox-position":"left"},on:{"update:data":function(e){t.shares=e},"update:checkedRows":function(e){t.tableCheckedRows=e},"update:checked-rows":function(e){t.tableCheckedRows=e}},scopedSlots:t._u([{key:"default",fn:function(e){return[s("b-table-column",{class:{"is-warning":e.row.paused},attrs:{field:"name",label:"T√™n",width:"40vw",sortable:""}},[s("span",{staticStyle:{"word-break":"break-word","max-width":"60vw"}},[t._v(t._s(e.row.name))])]),s("b-table-column",{class:{"is-warning":e.row.paused},attrs:{field:"size",label:"K√≠ch th∆∞·ªõc",width:"10vw",sortable:""}},[t._v(" "+t._s(e.row.size)+" ")]),s("b-table-column",{attrs:{field:"stats",label:"Tr·∫°ng th√°i",width:"50vw"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:!e.row.mine,expression:"!props.row.mine"}],staticClass:"control is-expanded downloadSection"},[s("a",{directives:[{name:"show",rawName:"v-show",value:e.row.done,expression:"props.row.done"}],attrs:{href:e.row.downloadURL,download:e.row.name}},[s("b-button",{attrs:{type:"is-success"}},[t._v("T·∫£i v·ªÅ")])],1),s("b-progress",{directives:[{name:"show",rawName:"v-show",value:!e.row.done,expression:"!props.row.done"}],attrs:{type:"is-success",size:"is-medium",value:e.row.progress,"show-value":""}},[s("span",[t._v(t._s(e.row.progress)+"%")]),s("span",{directives:[{name:"show",rawName:"v-show",value:e.row.paused,expression:"props.row.paused"}],staticClass:"has-text-black"},[t._v(" (D·ª´ng)")])])],1),e.row.mine?s("b-field",{attrs:{grouped:"","group-multiline":""}},[s("div",{staticClass:"control"},[s("span",{staticClass:"tags has-addons"},[s("span",{staticClass:"tag is-info"},[s("upload-icon",{staticClass:"icon is-small",attrs:{title:"S·∫µn s√†ng cho c√°c thi·∫øt b·ªã kh√°c t·∫£i xu·ªëng"}})],1)])]),t._l(e.row.users,(function(a,n){return s("div",{key:n,staticClass:"control"},[t.$store.state.users[n]?s("div",{staticClass:"tags has-addons"},[s("span",{staticClass:"tag is-dark"},[t._v(t._s(a)+"%")]),Object.keys(e.row.users).length>1?s("span",{staticClass:"tag",style:{"background-color":t.$store.state.users[n].color}},[t._v(t._s(t.$store.state.users[n].name))]):t._e()]):t._e()])}))],2):t._e()],1)]}}])},[s("template",{slot:"empty"},[s("b-upload",{attrs:{multiple:!0},on:{input:t.onFileChange},model:{value:t.files,callback:function(e){t.files=e},expression:"files"}},[s("p",{attrs:{id:"drop-area"}},[t._v("Th·∫£ t·ªáp c·ªßa b·∫°n ·ªü ƒë√¢y ho·∫∑c nh·∫•p ƒë·ªÉ t·∫£i l√™n")])]),s("center",[s("p",[t._v("M·ªü "),s("a",{attrs:{href:"https://nhom14.vercel.app"}},[t._v("Nh√≥m 14")]),t._v(" tr√™n thi·∫øt b·ªã c·ªßa b·∫°n ƒë·ªÉ tham gia ph√≤ng n√†y. C√°c thi·∫øt b·ªã trong c√πng m·ªôt WiFi / m·∫°ng s·∫Ω t·ª± ƒë·ªông tham gia c√πng m·ªôt ph√≤ng.")]),s("p",[t._v("B·∫°n c√≥ mu·ªën chuy·ªÉn c√°c t·∫≠p tin qua internet kh√¥ng?"),s("br"),s("share-icon",{staticClass:"icon is-large"}),s("br"),s("router-link",{attrs:{to:"/room"}},[t._v("Chia s·∫ª li√™n k·∫øt m·ªùi ho·∫∑c tham gia ph√≤ng")])],1)])],1)],2)],2),s("b-tab-item",{class:{noanim:!t.$store.state.settings.anim},attrs:{label:"Messages"}},[s("template",{slot:"header"},[s("android-messages-icon",{staticClass:"icon is-small"}),s("span",[s("span",{staticClass:"icon-text"},[t._v("Tin nh·∫Øn")]),t._v(" "),s("b-tag",{staticClass:"countTag",class:{"is-danger":t.glowMsgsBtn},attrs:{rounded:""}},[t._v(t._s(t.msgs.length))])],1)],1),s("b-field",{staticClass:"is-floating-label",attrs:{label:"Tin nh·∫Øn"}},[s("div",{staticClass:"control is-clearfix"},[s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.msg,expression:"msg"}],ref:"msgInput",staticClass:"textarea",attrs:{placeholder:"Nh·∫≠p tin nh·∫Øn ·ªü ƒë√¢y..."},domProps:{value:t.msg},on:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")||e.ctrlKey||e.shiftKey||e.altKey||e.metaKey?null:void e.preventDefault()},keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")||e.ctrlKey||e.shiftKey||e.altKey||e.metaKey?null:t.sendMsg(e)},input:function(e){e.target.composing||(t.msg=e.target.value)}}})])]),s("b-field",[s("div",{staticClass:"control"},[s("b-button",{attrs:{type:"button is-primary"},on:{click:t.sendMsg}},[t._v("G·ª≠i")]),s("div",{staticClass:"is-pulled-right"},[s("b-tooltip",{attrs:{label:"T·ª± ƒë·ªông sao ch√©p v√†o khay nh·ªõ t·∫°m",position:"is-left",type:"is-dark"}},[s("router-link",{staticClass:"button is-dark",attrs:{to:"/settings",tag:"div"}},[s("robot-icon",{staticClass:"icon is-small"})],1)],1),t._v(" "),s("b-tooltip",{attrs:{label:"X√≥a t·∫•t c·∫£ tin nh·∫Øn",position:"is-left",type:"is-dark"}},[s("a",{staticClass:"button is-danger",attrs:{"aria-label":"Clear all messages",title:"Clear all messages"},on:{click:t.clearAllMsgs}},[s("notification-clear-all-icon",{staticClass:"icon is-small"})],1)])],1)],1)]),s("div",{attrs:{id:"messages"}},[s("p",{directives:[{name:"show",rawName:"v-show",value:0===t.msgs.length,expression:"msgs.length === 0"}]},[t._v(" Kh√¥ng c√≥ tin nh·∫Øn ")]),t._l(t.msgs,(function(e,a){return s("div",{key:a,staticClass:"card"},[s("header",{staticClass:"card-header"},[s("p",{staticClass:"card-header-title"},[s("b-tag",{staticClass:"has-text-white",style:{"background-color":e.color}},[t._v(t._s(e.time))]),s("b-tag",[t._v(t._s(e.name))])],1),s("a",{directives:[{name:"clipboard",rawName:"v-clipboard",value:e.msg,expression:"msg.msg"}],staticClass:"card-header-icon",attrs:{title:"Copy message"},on:{click:t.copyMsg}},[t._v(" Copy ")])]),s("div",{staticClass:"card-content"},[s("div",{directives:[{name:"linkified",rawName:"v-linkified"}],staticClass:"content",staticStyle:{"white-space":"pre-line"},domProps:{innerHTML:t._s(e.msg)}})])])}))],2)],2),s("b-tab-item",{class:{noanim:!t.$store.state.settings.anim},attrs:{label:"Devices"}},[s("template",{slot:"header"},[s("devices-icon",{staticClass:"icon is-small"}),s("span",[s("span",{staticClass:"icon-text"},[t._v("Thi·∫øt b·ªã")]),t._v(" "),s("b-tag",{staticClass:"countTag",class:{"is-danger":t.glowUsersBtn},attrs:{rounded:""}},[t._v(t._s(t.usersCount))])],1)],1),s("div",{staticClass:"content",staticStyle:{position:"relative","border-bottom":"2px dashed #dbdbdb"}},[s("p",[s("router-link",{attrs:{to:"/grid"}},[s("b-button",{staticStyle:{float:"right"},attrs:{type:"is-primary"}},[t._v("Xem b·∫£n ƒë·ªì")])],1),s("b-taglist",{attrs:{attached:""}},[s("router-link",{attrs:{to:"/settings"}},[s("b-tag",{staticClass:"has-text-white",staticStyle:{"text-overflow":"ellipsis","max-width":"50vw"},style:{"background-color":t.$store.state.settings.color},attrs:{type:"is-success",size:"is-medium"}},[t._v(" "+t._s(t.$store.state.settings.name)+" ")]),s("b-tag",{attrs:{type:"is-warning",size:"is-medium"}},[t._v("B·∫°n")])],1)],1)],1),s("span",{staticStyle:{position:"absolute",bottom:"-11px"}},[t._v("Thi·∫øt b·ªã")]),s("p")]),s("p",{directives:[{name:"show",rawName:"v-show",value:0===t.usersCount,expression:"usersCount === 0"}]},[s("center",{staticClass:"content"},[s("p",[t._v("M·ªü "),s("a",{attrs:{href:"https://nhom14.vercel.app"}},[t._v("Nh√≥m 14")]),t._v(" tr√™n thi·∫øt b·ªã c·ªßa b·∫°n ƒë·ªÉ tham gia ph√≤ng n√†y. C√°c thi·∫øt b·ªã trong c√πng m·ªôt WiFi / m·∫°ng s·∫Ω t·ª± ƒë·ªông tham gia c√πng m·ªôt ph√≤ng.")]),s("p",[t._v("B·∫°n c√≥ mu·ªën chuy·ªÉn c√°c t·∫≠p tin qua internet kh√¥ng?"),s("br"),s("share-icon",{staticClass:"icon is-large"}),s("br"),s("router-link",{attrs:{to:"/room"}},[t._v("Chia s·∫ª li√™n k·∫øt m·ªùi ho·∫∑c tham gia ph√≤ng")])],1)])],1),t._l(t.users,(function(e,a){return s("b-field",{key:a,attrs:{grouped:"","group-multiline":""}},[s("b-taglist",{staticClass:"control noselect",attrs:{attached:""}},[s("b-tag",{staticClass:"has-text-white",style:{"background-color":e.color},attrs:{size:"is-medium"}},[t._v(t._s(e.name))]),s("b-tag",{attrs:{size:"is-medium",type:"is-warning"}},[s("a",{on:{click:function(s){return t.ping(e)}}},[t._v("Ping!")])])],1)],1)}))],2)],1)],1)])},X=[],V=(s("a630"),s("fb6a"),s("a9e3"),s("b680"),s("07ac"),s("3ca3"),s("ddb0"),s("2b3d"),s("d98a")),W=s("0647"),Y=s("f4d5"),J=s("c6a8"),Q=s("fd30"),Z=s("d729"),tt=s("b392"),et=s("dfa1"),st=s("ec1b"),at=s("8d15"),nt=s("72ba"),it=s("ba3a"),rt=s("67bc"),ot=s.n(rt),ct=s("2a3b"),lt=s("3717"),ut=s("62a9"),dt=new ot.a,ht=null,mt=0;function pt(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;if(0===t)return"0 B";var s=1024,a=e<0?0:e,n=["B","KB","MB","GB","TB","PB","EB","ZB","YB"],i=Math.floor(Math.log(t)/Math.log(s));return parseFloat((t/Math.pow(s,i)).toFixed(a))+" "+n[i]}var ft={name:"Send",components:{AndroidMessagesIcon:V["a"],DeleteIcon:W["a"],DevicesIcon:Y["a"],ShareIcon:J["a"],FileMultipleIcon:Q["a"],FileUploadIcon:Z["a"],NotificationClearAllIcon:tt["a"],PauseIcon:et["a"],PlayIcon:st["a"],RobotIcon:at["a"],SpeedIcon:nt["a"],UploadIcon:it["a"]},data:function(){return{activeTab:Number(this.$store.state.settings.defaultTab),autoStart:this.$store.state.settings.autoStart,glowFilesBtn:!1,glowMsgsBtn:!1,glowUsersBtn:!1,files:[],msg:"",shares:[],speed:"0B",tableCheckedRows:[]}},watch:{autoStart:function(t){this.$store.commit("setting",{name:"autoStart",value:t})},activeTab:function(t){1===t&&this.focusMsgInput()}},computed:{users:function(){return this.$store.state.users},usersCount:function(){return Object.keys(this.users).length},msgs:function(){return this.$store.state.msgs.slice().reverse()},activeTransfers:function(){var t=0;return Object.values(this.$store.state.shares).forEach((function(e){t+=e.transfers.length})),t}},methods:{onFileChange:function(t){for(var e in t)this.makeShare(t[e]);this.files=[],dt.enable()},focusMsgInput:function(){var t=this,e=function(){t.$refs.msgInput.focus()};this.$store.state.settings.anim?setTimeout(e,1e3):this.$nextTick(e)},addShareToList:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],s={shareID:t.shareID,name:t.name,size:pt(t.size),paused:t.paused,done:!1,mine:e,progress:0};e&&(s.users={}),this.$set(this.shares,this.shares.length,s)},makeShare:function(t){var e=ct["sync"](t.name+t.size);if(!this.$store.state.shares[e]){var s={shareID:e,file:t,name:t.name,size:t.size,paused:!1};this.$store.commit("addShare",s),this.addShareToList(s,!0)}},addNewShare:function(t){var e=this,s=t.shareID,a=this.getIndexOfShare(s);if(null===a)t.paused=!this.autoStart,this.addShareToList(t,!1);else if(this.shares[a].done)return;this.autoStart&&this.downloadShare(t),this.incomingNotify||"Shares"===this.$route.name&&("Shares"!==this.$route.name||0===this.activeTab)||(this.incomingNotify=this.$buefy.snackbar.open({message:"T·ªáp m·ªõi ƒë·∫øn!",type:"is-warning",position:"is-bottom",queue:!0,actionText:"Xem",onAction:function(){e.activeTab=0,"Shares"!==e.$route.name&&e.$router.push("/"),e.incomingNotify=null}}),setTimeout((function(){e.incomingNotify=null}),3e3))},downloadShare:function(t){var e=this,s=t.shareID,a=t.peer;this.$pf.receive(a,s).then((function(a){var n=e.getIndexOfShare(s),i=0,r=0;if(a.on("progress",(function(t,s){mt+=s-i,i=s,t=parseInt(t),r!==t&&(e.$set(e.shares[n],"progress",t),r=t)})),a.on("done",(function(t){e.$set(e.shares[n],"progress",100);var i=URL.createObjectURL(t);e.$set(e.shares[n],"done",!0),e.$set(e.shares[n],"downloadURL",i),e.$store.commit("removeTransfer",{shareID:s,userID:a.peer._id})})),e.$store.commit("setTransfer",{shareID:s,transfer:a}),e.$set(e.shares[n],"paused",!1),e.$store.state.settings.autoBrowserDownload){var o=a.createReadStream();lt["WritableStream"]=ut["a"];var c=lt["createWriteStream"](t.name,{size:t.size}),l=c.getWriter();o.on("data",(function(t){return l.write(t)})).on("end",(function(){return l.close()}))}})),this.$store.state.p2pt.send(a,{type:"startSending",shareID:s})},pauseShare:function(){var t,e=Object(f["a"])(this.tableCheckedRows);try{for(e.s();!(t=e.n()).done;){var s=t.value;this.$set(this.shares[this.getIndexOfShare(s.shareID)],"paused",!0),this.$store.commit("pauseShare",s.shareID)}}catch(a){e.e(a)}finally{e.f()}},resumeShare:function(){var t,e=Object(f["a"])(this.tableCheckedRows);try{for(e.s();!(t=e.n()).done;){var s=t.value;this.$set(this.shares[this.getIndexOfShare(s.shareID)],"paused",!1);var a=this.$store.state.shares[s.shareID];a&&a.transfers.length>0?a.transfers.forEach((function(t){t.resume()})):s.mine||this.downloadShare(s.shareID)}}catch(n){e.e(n)}finally{e.f()}},removeShare:function(){var t=this.tableCheckedRows;for(var e in t){var s=t[e].shareID;this.$delete(this.shares,this.getIndexOfShare(s)),this.$store.commit("removeShare",s)}this.tableCheckedRows=[]},getIndexOfShare:function(t){for(var e in this.shares)if(this.shares[e].shareID===t)return e;return null},ping:function(t){var e=[t];this.$root.$emit("ping",e)},copyMsg:function(){this.$buefy.toast.open({duration:2e3,message:"ƒê√£ copy tin nh·∫Øn !",position:"is-top",type:"is-primary"})},clearAllMsgs:function(){this.$store.commit("clearMessages")},sendMsg:function(){var t={type:"msg",msg:this.msg,time:(new Date).toLocaleTimeString()};for(var e in this.$store.commit("addMessage",Object(h["a"])(Object(h["a"])({},t),{name:this.$store.state.settings.name,color:this.$store.state.settings.color})),this.$store.state.users){var s=this.$store.state.users[e];this.$store.state.p2pt.send(s.conn,t)}this.msg=""},startSpeedUpdate:function(){var t=this;if(!ht){var e=function(){t.speed=pt(mt),mt=0};document.addEventListener("click",(function t(){document.removeEventListener("click",t,!1),dt.enable()}),!1),setTimeout(e,1e3),ht=setInterval(e,1e3)}},stopSpeedUpdate:function(){0===this.activeTransfers&&(clearInterval(ht),ht=null,mt=0,this.speed="0B",dt.disable())}},mounted:function(){var t=this;this.$store.subscribe((function(e){var s=e.type,a=e.payload;if("newShare"===s)t.addNewShare(a),t.glowFilesBtn=!0,setTimeout((function(){t.glowFilesBtn=!1}),500);else if("addShare"===s){var n=t.$store.state.p2pt,i=Object(h["a"])(Object(h["a"])({},a),{type:"newShare"});for(var r in delete i.file,t.$store.state.users){var o=t.$store.state.users[r];n.send(o.conn,i)}}else"removeUser"===s?Object.entries(t.shares).forEach((function(e,s){t.shares[s].mine&&t.$delete(t.shares[s].users,a)})):"addUser"===s?(t.glowUsersBtn=!0,setTimeout((function(){t.glowUsersBtn=!1}),500)):"addMessage"===s?(t.glowMsgsBtn=!0,setTimeout((function(){t.glowMsgsBtn=!1}),500)):"setTransfer"===s?t.startSpeedUpdate():"removeTransfer"===s&&setTimeout((function(){t.stopSpeedUpdate()}),1e3)})),this.$store.subscribeAction((function(e){var s=e.type,a=e.payload;if("uploadProgress"===s){mt+=a.bytes;var n=t.getIndexOfShare(a.shareID);t.$set(t.shares[n].users,a.userID,a.progress)}else"invalidRoomCode"===s&&t.$buefy.toast.open({duration:2e3,message:"M√£ ph√≤ng kh√¥ng h·ª£p l·ªá",position:"is-top",type:"is-danger",queue:!1})})),1===this.activeTab&&this.focusMsgInput();var e,s,a=document.documentElement,n=document.body;a.addEventListener("dragover",(function(t){t.preventDefault(),n.classList.add("dragging"),s=!0})),a.addEventListener("dragleave",(function(){s=!1,clearTimeout(e),e=setTimeout((function(){s||n.classList.remove("dragging")}),200)})),a.addEventListener("drop",(function(e){function s(t){var e=[];function s(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return new Promise((function(n){if(t.isFile)t.file((function(t){t.filepath=a+t.name,e.push(t),n(t)}));else if(t.isDirectory){var i=t.createReader();i.readEntries((function(e){var i,r=[],o=Object(f["a"])(e);try{for(o.s();!(i=o.n()).done;){var c=i.value;r.push(s(c,a+t.name+"/"))}}catch(l){o.e(l)}finally{o.f()}n(Promise.all(r))}))}}))}return new Promise((function(a,n){var i,r=[],o=Object(f["a"])(t);try{for(o.s();!(i=o.n()).done;){var c=i.value;r.push(s(c.webkitGetAsEntry?c.webkitGetAsEntry():c.getAsEntry()))}}catch(l){o.e(l)}finally{o.f()}Promise.all(r).then((function(){a(e)})).catch(n)}))}e.stopPropagation(),e.preventDefault(),n.classList.remove("dragging"),s(e.dataTransfer.items).then((function(e){e&&t.onFileChange(e)})).catch((function(){var s=Array.from(e.dataTransfer.files);s&&t.onFileChange(s)}))}))}},gt=ft,vt=(s("3187"),Object(k["a"])(gt,H,X,!1,null,null,null)),bt=vt.exports;i["a"].use(_["a"]);var yt=[{path:"/",name:"Shares",component:bt},{path:"/grid",name:"Grid",component:E},{path:"/settings",name:"Settings",component:L},{path:"/room",name:"Room",component:K},{path:"/about",name:"About",component:function(){return s.e("about").then(s.bind(null,"f820"))}}],Ct=new _["a"]({routes:yt}),wt=Ct,kt=(s("a434"),s("2f62")),St=(s("ac1f"),s("466d"),navigator.userAgent),$t="",_t=navigator.platform,xt=St.match(/(MSIE|Trident|(?!Gecko.+)Firefox|(?!AppleWebKit.+Chrome.+)Safari(?!.+Edge)(?!.+OPR)|(?!AppleWebKit.+)Chrome(?!.+Edge)(?!.+OPR)|(?!AppleWebKit.+Chrome.+Safari.+)Edge|OPR|AppleWebKit(?!.+Chrome|.+Safari)|Gecko(?!.+Firefox))(?: |\/)([\d]+)/);xt&&xt[1]&&xt[2]&&($t=xt[1]+xt[2]),_t.match("Linux")?(xt=St.match(/(Android)[ -](\d+)/),xt&&xt[1]?(_t=xt[1],xt[2]&&(_t+=xt[2])):_t="Linux"):_t.match(/mac/i)&&(_t="Mac");var It={os:_t,browser:$t},Tt=It;i["a"].use(kt["a"]);var Ot=new kt["a"].Store({state:{users:{},selectedUsers:[],msgs:[],shares:{},p2pt:b.a,settings:{autoCopy:!1,autoStart:!0,autoBrowserDownload:!0,anim:!0,defaultTab:0,name:"",color:""},internetShare:!1,roomID:""},mutations:{initSettings:function(t){var e=window.localStorage.getItem("settings");e&&(e=JSON.parse(e),t.settings=Object.assign({},t.settings,e));var s=t.settings.name;(!s||s.length>30)&&(t.settings.name="".concat(Tt.os," ").concat(Tt.browser));var a=t.settings.color;(!a||a.length>20)&&(t.settings.color="hsla(".concat(~~(360*Math.random()),",60%,60%,1)"))},updateSettings:function(t,e){i["a"].set(t,"settings",Object(h["a"])(Object(h["a"])({},t.settings),e)),window.localStorage.setItem("settings",JSON.stringify(t.settings))},addUser:function(t,e){i["a"].set(t.users,e.id,{name:e.name,color:e.color,conn:e.conn})},removeUser:function(t,e){i["a"].delete(t.users,e)},selectUser:function(t,e){t.selectedUsers.push(e)},deselectUser:function(t,e){t.selectedUsers.splice(t.selectedUsers.indexOf(e),1)},clearSelectedUsers:function(t){t.selectedUsers=[]},addShare:function(t,e){i["a"].set(t.shares,e.shareID,Object(h["a"])(Object(h["a"])({},e),{mine:!0,transfers:[]}))},newShare:function(t,e){i["a"].set(t.shares,e.shareID,Object(h["a"])(Object(h["a"])({},e),{mine:!1,transfers:[]}))},setTransfer:function(t,e){var s=t.shares[e.shareID].transfers;i["a"].set(s,s.length,e.transfer)},removeTransfer:function(t,e){t.shares[e.shareID].transfers.forEach((function(s,a){s.peer._id===e.userID&&i["a"].delete(t.shares[e.shareID].transfers,a)}))},pauseShare:function(t,e){t.shares[e]&&(t.shares[e].transfers.forEach((function(t){t.pause()})),i["a"].set(t.shares[e],"paused",!0))},removeShare:function(t,e){t.shares[e]&&(t.shares[e].transfers.forEach((function(t){t.cancel()})),i["a"].delete(t.shares,e))},setRoom:function(t,e){t.roomID=e},activateInternetShare:function(t,e){t.internetShare=!0,t.roomID=e},setP2PT:function(t,e){t.p2pt=e},destroyP2PT:function(t){null!==t.p2pt&&(t.p2pt.destroy(),t.users={})},addMessage:function(t,e){i["a"].set(t.msgs,t.msgs.length,e)},clearMessages:function(t){t.msgs=[]}},actions:{uploadProgress:function(){},invalidRoomCode:function(){}}}),Rt=s("9483");function Pt(t){Object(Rt["a"])("".concat("/","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered:function(){console.log("Service worker has been registered.")},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(){console.log("New content is available; please refresh."),t.$buefy.snackbar.open({message:"New update! Please refresh",type:"is-success",queue:!1,indefinite:!0,actionText:"Refresh",onAction:function(){window.location.reload(!0)}})},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(t){console.error("Error during service worker registration:",t)}})}var Et=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",["About"!==t.$route.name?s("b-navbar",{staticClass:"header-bg has-shadow is-success",attrs:{"mobile-burger":!1,transparent:!0}},[s("template",{slot:"brand"},[s("b-navbar-item",{attrs:{id:"brand",tag:"router-link",to:{path:"/"}}},[s("h1",{staticClass:"is-size-4"},[t._v("Nh√≥m 14")])]),s("div",{staticClass:"actions"},[s("b-tooltip",{attrs:{label:t.internetShare?"ƒê√£ tham gia Ph√≤ng chia s·∫ª Internet":"Chia s·∫ª qua Internet",position:"is-bottom",type:t.internetShare?"is-info":"is-primary"}},[s("b-navbar-item",{attrs:{tag:"router-link",to:{path:"/room"}}},[s("a",{staticClass:"button is-text",class:{"is-info":t.internetShare},attrs:{"aria-label":t.internetShare?"ƒê√£ tham gia Ph√≤ng chia s·∫ª Internet":"Chia s·∫ª qua Internet"}},[s("share-icon",{staticClass:"icon is-medium"})],1)])],1),s("b-tooltip",{attrs:{label:"C√†i ƒë·∫∑t",position:"is-bottom",type:"is-dark"}},[s("b-navbar-item",{attrs:{tag:"router-link",to:{path:"/settings"},title:"Settings"}},[s("cog-icon",{staticClass:"icon is-medium has-text-dark"})],1)],1),s("b-navbar-item",{attrs:{tag:"router-link",to:{path:"/about"}}},[s("b-button",{attrs:{type:"is-warning"}},[t._v("H·ªó tr·ª£")])],1)],1)],1)],2):s("b-navbar",{staticClass:"navbar is-warning has-text-white",attrs:{"mobile-burger":!1}},[s("template",{slot:"brand"},[s("b-navbar-item",{attrs:{tag:"router-link",to:{path:"/"}}},[s("h1",{staticClass:"is-size-4"},[t._v("Nh√≥m 14")])]),s("b-navbar-item",{attrs:{tag:"router-link",to:{path:"/grid"}}},[t._v(" B·∫£n ƒë·ªì ")])],1)],2)],1)},Dt=[],Mt=s("43af"),Nt={name:"Header",components:{CogIcon:Mt["a"],ShareIcon:J["a"]},computed:{internetShare:function(){return this.$store.state.internetShare}}},jt=Nt,Ut=(s("94ab"),Object(k["a"])(jt,Et,Dt,!1,null,null,null)),Lt=Ut.exports,At=s("15f3"),Bt=s.n(At),Ft=s("9e32"),qt=s.n(Ft),zt=s("21ce"),Gt=s.n(zt),Kt=s("3e88"),Ht=s.n(Kt),Xt=s("edc3"),Vt=s.n(Xt),Wt=s("2adb"),Yt=s.n(Wt),Jt=s("45fa"),Qt=s.n(Jt),Zt=s("409f"),te=s.n(Zt),ee=s("9261"),se=s.n(ee),ae=s("a992"),ne=s.n(ae),ie=s("d6ee"),re=s.n(ie),oe=s("3799"),ce=s.n(oe),le=s("8684"),ue=s.n(le);i["a"].use(o.a);for(var de=[Bt.a,qt.a,Gt.a,Ht.a,Vt.a,Yt.a,Qt.a,te.a,se.a,ce.a,ne.a,ue.a,re.a],he=0,me=de;he<me.length;he++){var pe=me[he];i["a"].use(pe)}i["a"].component("Header",Lt),i["a"].directive("linkified",n.a);var fe=["wss://tracker.openwebtorrent.com","wss://wsswt.herokuapp.com","wss://tracker.btorrent.xyz","wss://tracker.sloppyta.co:443/","wss://tracker.novage.com.ua:443/"];"localhost"===window.location.hostname&&(fe=["ws://0.0.0.0:5000"]);var ge=4;i["a"].prototype.$ANNOUNCE_URLS=fe,i["a"].prototype.$INTERNET_ROOM_CODE_LENGTH=ge,i["a"].prototype.$INTERNET_ROOM_SHARE_LINK="https://nhom14.vercel.app/#/?room=",i["a"].prototype.$p2pt=null,i["a"].prototype.$pf=new l.a,i["a"].prototype.$validateRoomCode=function(t){return t.length===ge},Ot.commit("initSettings");var ve=new i["a"]({router:wt,store:Ot,render:function(t){return t($)},mounted:function(){return document.dispatchEvent(new Event("x-app-rendered"))}}).$mount("#app");Pt(ve)},d0a2:function(t,e,s){"use strict";var a=s("a3dc"),n=s.n(a);n.a}});
//# sourceMappingURL=app.c9696751.js.map